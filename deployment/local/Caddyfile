:8081 {
  log

  # GET requests - public anonymous read access with caching
  @get_photos {
    method GET
    path /vehicle-photos/*
  }

  handle @get_photos {
    header Access-Control-Allow-Origin "*"
    header Access-Control-Allow-Methods "GET, OPTIONS"
    header Cache-Control "public, max-age=3600"
    reverse_proxy minio:9000
  }

  # Handle OPTIONS preflight requests for reads
  @options {
    method OPTIONS
    path /vehicle-photos/*
  }

  handle @options {
    header Access-Control-Allow-Origin "*"
    header Access-Control-Allow-Methods "GET, OPTIONS"
    respond 204
  }

  # Catch-all for undefined paths
  handle {
    respond "Not Found" 404
  }
}
